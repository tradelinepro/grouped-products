!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=(window.__sw__.assetPath + '/bundles/tradelineprogroupedproducts/'),n(n.s="ZRL4")}({"2gbo":function(e,t,n){},"6pSz":function(e,t,n){var r=n("9j4e");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("P8hj").default)("d8fb71ec",r,!0,{})},"9j4e":function(e,t,n){},P8hj:function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],s=i[0],a={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}n.r(t),n.d(t,"default",(function(){return f}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},s=o&&(document.head||document.getElementsByTagName("head")[0]),a=null,c=0,d=!1,u=function(){},l=null,p="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,n,o){d=n,l=o||{};var s=r(e,t);return g(s),function(t){for(var n=[],o=0;o<s.length;o++){var a=s[o];(c=i[a.id]).refs--,n.push(c)}t?g(s=r(e,t)):s=[];for(o=0;o<n.length;o++){var c;if(0===(c=n[o]).refs){for(var d=0;d<c.parts.length;d++)c.parts[d]();delete i[c.id]}}}}function g(e){for(var t=0;t<e.length;t++){var n=e[t],r=i[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(y(n.parts[o]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(y(n.parts[o]));i[n.id]={id:n.id,refs:1,parts:s}}}}function b(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function y(e){var t,n,r=document.querySelector("style["+p+'~="'+e.id+'"]');if(r){if(d)return u;r.parentNode.removeChild(r)}if(m){var o=c++;r=a||(a=b()),t=w.bind(null,r,o,!1),n=w.bind(null,r,o,!0)}else r=b(),t=v.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var _,h=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function w(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,o);else{var i=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function v(e,t){var n=t.css,r=t.media,o=t.sourceMap;if(r&&e.setAttribute("media",r),l.ssrId&&e.setAttribute(p,t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},RK4I:function(e,t,n){},XFAb:function(e,t,n){},ZRL4:function(e,t,n){"use strict";n.r(t);n("h21c");Shopware.Component.override("sw-entity-listing",{methods:{createdComponent:function(){this.$super("createdComponent")},getRowClasses:function(e,t){var n=this.$super("getRowClasses",e,t);return e.customFields&&e.customFields.isGrouped&&n.push("is--grouped"),n}}});function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=Shopware.Component,c=Shopware.Component.getComponentHelper(),d=c.mapState,u=c.mapGetters;a.override("sw-product-detail-base",{template:'{% block sw_product_detail_base_price_card %}\n<template v-if="!isLoading && !isGrouped">{% parent %}</template>\n{% endblock %}\n\n{% block sw_product_detail_deliverability_info_card %}\n<template v-if="!isLoading && !isGrouped">{% parent %}</template>\n{% endblock %}\n\n{% block sw_product_detail_base_settings_card %}\n<template v-if="!isLoading && !isGrouped">{% parent %}</template>\n{% endblock %}\n',computed:i(i(i({},d("swProductDetail",["product","loading"])),u("swProductDetail",["isLoading"])),{},{isGrouped:function(){return this.product&&this.product.customFields&&this.product.customFields.isGrouped}})});function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=Shopware.Component,b=Shopware.Component.getComponentHelper(),y=b.mapState,_=b.mapGetters;g.override("sw-product-detail-specifications",{template:'{% block sw_product_detail_specifications_measures_packaging %}\n<template v-if="!isLoading && !isGrouped">{% parent %}</template>\n{% endblock %}\n',computed:m(m(m({},y("swProductDetail",["product","loading"])),_("swProductDetail",["isLoading"])),{},{isGrouped:function(){return this.product&&this.product.customFields&&this.product.customFields.isGrouped}})});function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=Shopware.Component,k=Shopware.Data.Criteria,O=Shopware.Component.getComponentHelper(),j=O.mapState,C=O.mapGetters;P.override("sw-product-detail",{template:'{% block sw_product_detail_content_tabs_general %}\n    {% parent %}\n\n    {% block sw_product_detail_content_tabs_grouped %}\n    <sw-tabs-item\n        v-if="!isLoading && isGrouped"\n        :route="{ name: \'sw.product.detail.grouped\', params: { id: $route.params.id } }"\n        :title="$tc(\'grouped-products.groups\')"\n    >\n\n        {{ $tc(\'grouped-products.groups\') }}\n    </sw-tabs-item>\n    {% endblock %}\n{% endblock %}\n\n{% block sw_product_detail_content_tabs_advanced_prices %}\n<template v-if="!isLoading && !isGrouped">{% parent %}</template>\n{% endblock %}\n\n{% block sw_product_detail_content_tabs_advanced_variants %}\n<template v-if="!isLoading && !isGrouped">{% parent %}</template>\n{% endblock %}\n',data:function(){return{isGrouped:!1}},computed:v(v(v({},j("swProductDetail",["product"])),C("swProductDetail",["isLoading"])),{},{productCriteria:function(){var e=this.$super("productCriteria");return e.addAssociation("groups.assignedProducts"),e.getAssociation("groups").addSorting(k.sort("position","ASC")).getAssociation("assignedProducts").addSorting(k.sort("position","ASC")).addAssociation("product"),e}}),watch:{product:function(){this.productId||(this.isGrouped=!!this.$route.params.isGrouped),this.product&&(this.product.customFields||(this.product.customFields={}),this.product.customFields.isGrouped&&(this.isGrouped=this.product.customFields.isGrouped),this.isGrouped&&this.$set(this.product.customFields,"isGrouped",this.isGrouped))}},methods:{onSave:function(){return this.isGrouped&&!this.productId?this.saveProduct().then(this.onSaveFinished):this.$super("onSave")}}});Shopware.Component.override("sw-product-list",{template:'{% block sw_product_list_grid_columns %}\n    {% parent %}\n\n    {% block sw_product_list_grid_columns_grouped %}\n        <template #column-customFields.isGrouped="{ item }">\n            <sw-icon\n                v-if="item.translated?.customFields?.isGrouped"\n                name="regular-checkmark-xs"\n                small\n                class="is--active"\n            />\n            <sw-icon\n                v-else\n                name="regular-times-s"\n                small\n                class="is--inactive"\n            />\n        </template>\n    {% endblock %}\n{% endblock %}\n\n{% block sw_product_list_smart_bar_actions_add_download_context_menu_item_downloadable_product %}\n    {% parent %}\n\n    {% block sw_product_list_smart_bar_actions_add_download_context_menu_item_grouped_product %}\n        <sw-context-menu-item\n                v-tooltip="{\n                    message: $tc(\'sw-privileges.tooltip.warning\'),\n                    disabled: acl.can(\'product.creator\'),\n                    showOnDisabledElements: true\n                }"\n                :router-link="{ name: \'sw.product.create\', params: { isGrouped: [true] } }"\n                :disabled="!acl.can(\'product.creator\')"\n        >\n            {{ $tc(\'grouped-products.buttonAddGroupedProduct\') }}\n        </sw-context-menu-item>\n    {% endblock %}\n{% endblock %}\n',created:function(){this.createdComponent()},computed:{productColumns:function(){for(var e=this.$super("productColumns"),t=!1,n=0;n<e.length;++n)if("customFields.isGrouped"==e[n].property){t=!0;break}if(t)return e;for(var r=-1,o=0;o<e.length;++o)if("active"==e[o].property){r=o;break}return r>=0&&e.splice(++r,0,{property:"customFields.isGrouped",label:this.$tc("grouped-products.grouped"),allowResize:!0,align:"center"}),e}},methods:{createdComponent:function(){try{this.$super("createdComponent")}catch(e){}}}});n("nHlZ");function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==D(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===D(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=Shopware.Component,A=Shopware.Data.Criteria,G=Shopware.Component.getComponentHelper(),T=G.mapState,M=G.mapGetters;$.register("sw-product-detail-grouped",{template:'{% block sw_product_detail_grouped %}\n<div class="sw-product-detail-grouped">\n\n    {% block sw_product_detail_grouped_items_wrapper %}\n    <template v-if="showGroupCard">\n\n        {% block sw_product_detail_grouped_items %}\n        <tradelinepro-product-grouped-form\n            v-for="item in product.extensions.groups"\n            :key="item.id"\n            :grouped="item"\n            :allow-edit="acl.can(\'product.editor\')"\n        />\n        {% endblock %}\n\n        {% block sw_product_detail_grouped_add %}\n        <sw-button\n            class="sw-product-detail-grouped__add-btn"\n            variant="ghost"\n            @click="onAddGrouped"\n            :disabled="!acl.can(\'product.editor\')"\n            v-tooltip="tooltipDefault"\n        >\n\n            {{ $tc(\'grouped-products.buttonAddGroup\') }}\n        </sw-button>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n    {% block sw_product_detail_empty_state %}\n    <sw-card\n        v-else\n        position-identifier="sw-product-detail-empty-state"\n        class="sw-product-detail-grouped__empty-state"\n    >\n\n        <sw-loader v-if="isLoading"/>\n        <div v-else>\n            <template>\n\n                {% block sw_product_detail_empty_state_inner %}\n                <div class="sw-product-detail-grouped__empty-state-inner">\n\n                    {% block sw_product_detail_empty_state_inner %}\n                    <img :src="\'/administration/static/img/empty-states/products-empty-state.svg\' | asset">\n                    {% endblock %}\n\n                    {% block sw_product_detail_empty_state_description %}\n                    <div class="sw-product-detail-grouped__empty-state-inner--label">\n\n                        {% block sw_product_detail_empty_state_description_inner %}\n                        <p>{{ $tc(\'grouped-products.emptyStateDescription\') }}</p>\n                        {% endblock %}\n\n                    </div>\n                    {% endblock %}\n\n                    {% block sw_product_detail_empty_state_grouped_add %}\n                    <sw-button\n                        variant="ghost"\n                        @click="onAddGrouped"\n                        :disabled="!acl.can(\'product.editor\')"\n                        v-tooltip="tooltipDefault"\n                    >\n\n                        {{ $tc(\'grouped-products.buttonAddGroup\') }}\n                    </sw-button>\n                    {% endblock %}\n\n                </div>\n                {% endblock %}\n\n            </template>\n        </div>\n    </sw-card>\n    {% endblock %}\n\n</div>\n{% endblock %}\n',inject:["repositoryFactory","acl"],props:{allowEdit:{type:Boolean,required:!1,default:!0}},data:function(){return{grouped:null}},computed:F(F(F({},T("swProductDetail",["product"])),M("swProductDetail",["isLoading"])),{},{showGroupCard:function(){return!this.isLoading&&this.product.extensions.groups&&this.product.extensions.groups.length>0},tooltipDefault:function(){return{message:this.$tc("sw-privileges.tooltip.warning"),disabled:this.acl.can("product.editor"),showOnDisabledElements:!0}}}),watch:{product:function(e){var t=this;e.extensions.groups.forEach((function(e){e.assignedProducts.length>0||t.loadAssignedProducts(e)}))}},methods:{loadAssignedProducts:function(e){var t=this.repositoryFactory.create(e.assignedProducts.entity,e.assignedProducts.source),n=new A;return n.addFilter(A.equals("groupedId",e.id)).addSorting(A.sort("position","ASC")).addAssociation("product"),t.search(n,F(F({},Shopware.Context.api),{},{inheritance:!0})).then((function(t){e.assignedProducts=t})),e},onAddGrouped:function(){var e=this.repositoryFactory.create(this.product.extensions.groups.entity,this.product.extensions.groups.source);this.grouped=e.create(Shopware.Context.api),this.grouped.productId=this.product.id,this.grouped.position=this.product.extensions.groups.length+1,this.grouped.type="productStream",this.grouped.sortBy="name",this.product.extensions.groups.push(this.grouped)}}}),Shopware.Module.register("sw-product-detail-grouped",{routeMiddleware:function(e,t){"sw.product.detail"===t.name&&t.children.push({name:"sw.product.detail.grouped",path:"/sw/product/detail/:id/grouped",component:"sw-product-detail-grouped",meta:{parentPath:"sw.product.index"}}),e(t)}});n("pFeY");function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==L(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===L(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=Shopware.Data.Criteria,z=Shopware,H=z.Component,Z=z.Context,K=z.Utils,V=H.getComponentHelper(),X=V.mapPropertyErrors,Y=V.mapGetters,J=V.mapState;H.register("tradelinepro-product-grouped-form",{template:'{% block tradelinepro_product_grouped_form %}\n<div class="product-detail-grouped-form">\n\n    {% block tradelinepro_product_grouped_form_card %}\n    <sw-card position-identifier="tradelinepro-product-grouped-form-card" :title="grouped.name">\n        <div\n            v-if="!isLoading && grouped"\n            class="product-detail-grouped-form__card-container"\n        >\n\n            {% block tradelinepro_product_grouped_form_context_menu %}\n            <div class="sw-product-detail-grouped__context-button">\n                <sw-context-button>\n\n                    {% block tradelinepro_product_grouped_form_context_button_delete %}\n                    <sw-context-menu-item\n                        variant="danger"\n                        class="sw-product-grouped-context-item__delete-action"\n                        @click="onShowDeleteModal"\n                        :disabled="!allowEdit"\n                    >\n\n                        {{ $tc(\'sw-product.crossselling.buttonDeleteCrossSelling\') }}\n                    </sw-context-menu-item>\n                    {% endblock %}\n\n                </sw-context-button>\n            </div>\n            {% endblock %}\n\n            {% block tradelinepro_product_grouped_form_container_title_active %}\n            <sw-container\n                columns="2fr 1fr"\n                gap="0 30px"\n                align="start"\n            >\n\n                {% block tradelinepro_product_grouped_form_title_field %}\n                <sw-text-field\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingTitle\')"\n                    required\n                    :placeholder="$tc(\'sw-product.crossselling.inputCrossSellingTitlePlaceholder\')"\n                    v-model="grouped.name"\n                    :error="groupedNameError"\n                    :disabled="!allowEdit"\n                />\n                {% endblock %}\n\n                {% block tradelinepro_product_grouped_form_active_field %}\n                <sw-field\n                    type="switch"\n                    class="sw-product-detail-grouped__active-switch"\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingActive\')"\n                    v-model="grouped.active"\n                    :disabled="!allowEdit"\n                />\n                {% endblock %}\n\n            </sw-container>\n            {% endblock %}\n\n            {% block tradelinepro_product_grouped_form_container_crossselling_type_position %}\n            <sw-container\n                columns="2fr 1fr"\n                gap="0 30px"\n            >\n\n                {% block tradelinepro_product_grouped_form_type %}\n                <sw-select-field\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingType\')"\n                    @change="onTypeChanged"\n                    :error="groupedTypeError"\n                    v-model="grouped.type"\n                    :disabled="!allowEdit"\n                >\n\n                    <option\n                        v-for="option in groupedTypes"\n                        :key="option.value"\n                        :value="option.value"\n                    >\n\n                        {{ option.label }}\n                    </option>\n                </sw-select-field>\n                {% endblock %}\n\n                {% block tradelinepro_product_grouped_form_position_field %}\n                <sw-number-field\n                    number-type="int"\n                    :min="1"\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingPosition\')"\n                    :error="groupedPositionError"\n                    :placeholder="$tc(\'sw-product.crossselling.inputCrossSellingPositionPlaceholder\')"\n                    v-model="grouped.position"\n                    :disabled="!allowEdit"\n                />\n                {% endblock %}\n\n            </sw-container>\n            {% endblock %}\n\n            {% block tradelinepro_product_grouped_form_wrapper_crossselling_product_stream %}\n            <div v-if="!useManualAssignment">\n\n                {% block tradelinepro_product_grouped_form_product_stream_field %}\n                <sw-entity-single-select\n                    entity="product_stream"\n                    class="sw-select-grouped__select-product-stream"\n                    id="sw-field--grouped-product-group"\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingProductStream\')"\n                    :placeholder="$tc(\'sw-product.crossselling.inputCrossSellingProductStreamPlaceholder\')"\n                    v-model="grouped.productStreamId"\n                    :disabled="!allowEdit"\n                />\n                {% endblock %}\n\n                {% block tradelinepro_product_grouped_form_container_crossselling_sorting_limit %}\n                <sw-container\n                    columns="1fr 1fr"\n                    gap="0 30px"\n                >\n\n                    {% block tradelinepro_product_grouped_form_sort_field %}\n                    <sw-select-field\n                        :label="$tc(\'sw-product.crossselling.inputCrossSellingSorting\')"\n                        :value="sortingConCat"\n                        @change="onSortingChanged"\n                        :disabled="!allowEdit"\n                    >\n\n                        <option\n                            v-for="option in sortingTypes"\n                            :key="option.value"\n                            :value="option.value"\n                        >\n\n                            {{ option.label }}\n                        </option>\n                    </sw-select-field>\n                    {% endblock %}\n\n                    {% block tradelinepro_product_grouped_form_limit_field %}\n                    <sw-number-field\n                        number-type="int"\n                        :label="$tc(\'sw-product.crossselling.inputCrossSellingLimit\')"\n                        v-model="grouped.limit"\n                        :disabled="!allowEdit"\n                    />\n                    {% endblock %}\n\n                </sw-container>\n                {% endblock %}\n\n                {% block tradelinepro_product_grouped_form_preview_link %}\n                <sw-container\n                    columns="1fr"\n                    justify="end"\n                    class="sw-product-grouped-form__links"\n                >\n\n                    <a\n                        @click="openModalPreview"\n                        :class="{ \'is--disabled\': previewDisabled }"\n                        class="sw-card__quick-link"\n                    >\n                        {{ $tc(\'sw-product.crossselling.linkOpenStreamPreview\') }} <sw-icon\n                            name="regular-long-arrow-right"\n                            small\n                        />\n                    </a>\n                </sw-container>\n                {% endblock %}\n\n            </div>\n            {% endblock %}\n\n            {% block tradelinepro_product_detail_grouped_assignment %}\n            <tradelinepro-product-grouped-assignment\n                v-else\n                :assigned-products="grouped.assignedProducts"\n                :grouped-id="grouped.id"\n                :searchable-fields="[\'name\', \'productNumber\']"\n                :allow-edit="allowEdit"\n            />\n            {% endblock %}\n\n            {% block tradelinepro_product_detail_grouped_modal_preview_modal %}\n            <sw-product-stream-modal-preview\n                v-if="showModalPreview"\n                :filters="productStreamFilterTree"\n                ref="modalPreview"\n                @modal-close="closeModalPreview"\n            />\n            {% endblock %}\n\n        </div>\n    </sw-card>\n    {% endblock %}\n\n    {% block tradelinepro_product_detail_grouped_form_modal_delete %}\n    <sw-modal\n        v-if="showDeleteModal"\n        @modal-close="onCloseDeleteModal"\n        variant="small"\n        :title="$tc(\'grouped-products.deleteConfirmTitle\')"\n        class="sw-product-detail-grouped__delete-modal"\n    >\n\n        {% block tradelinepro_product_detail_grouped_form_delete_text %}\n        <p>{{ $tc(\'grouped-products.deleteConfirmText\') }}</p>\n        {% endblock %}\n\n        {% block tradelinepro_product_detail_grouped_form_modal_delete_footer %}\n        <template #modal-footer>\n\n            {% block tradelinepro_product_detail_grouped_modal_delete_action_cancel %}\n            <sw-button\n                @click="onCloseDeleteModal"\n                size="small"\n            >\n\n                {{ $tc(\'sw-product.crossselling.deleteButtonCancel\') }}\n            </sw-button>\n            {% endblock %}\n\n            {% block tradelinepro_product_detail_grouped_form_modal_delete_action_delete %}\n            <sw-button\n                class="sw-product-detail-grouped__delete-button"\n                size="small"\n                variant="danger"\n                @click="onConfirmDelete"\n            >\n\n                {{ $tc(\'sw-product.crossselling.deleteButtonDelete\') }}\n            </sw-button>\n            {% endblock %}\n\n        </template>\n        {% endblock %}\n\n    </sw-modal>\n    {% endblock %}\n\n    {% block tradelinepro_product_detail_grouped_form_condition_tree_invisibly %}\n    <sw-condition-tree\n        v-if="productStreamFilterRepository"\n        v-show="false"\n        association-field="productStreamId"\n        child-association-field="queries"\n        :initial-conditions="productStreamFilter"\n        :condition-repository="productStreamFilterRepository"\n        :condition-data-provider-service="productStreamConditionService"\n        :association-value="associationValue"\n        :root-condition="null"\n        @conditions-changed="updateProductStreamFilterTree"\n    />\n    {% endblock %}\n\n</div>\n{% endblock %}\n',inject:["repositoryFactory","productStreamConditionService"],provide:function(){return{productCustomFields:{}}},props:{grouped:{type:Object,required:!0},allowEdit:{type:Boolean,required:!1,default:!0}},data:function(){return{showDeleteModal:!1,showModalPreview:!1,productStream:null,productStreamFilter:[],productStreamFilterTree:null,optionSearchTerm:"",useManualAssignment:!1,sortBy:"name",sortDirection:"ASC",assignmentKey:0}},computed:B(B(B(B({},X("grouped",["name","type","position"])),J("swProductDetail",["product"])),Y("swProductDetail",["isLoading"])),{},{productGroupedRepository:function(){return this.repositoryFactory.create("tradelinepro_product_grouped")},productStreamRepository:function(){return this.repositoryFactory.create("product_stream")},productStreamFilterRepository:function(){if(!this.productStream)return null;var e=this.productStream.filters,t=e.entity,n=e.source;return this.repositoryFactory.create(t,n)},productStreamFilterCriteria:function(){var e=new U;return e.addFilter(U.equals("productStreamId",this.grouped.productStreamId)),e},groupedAssigmentRepository:function(){return this.repositoryFactory.create("tradelinepro_product_grouped_assigned_products")},sortingTypes:function(){return[{label:this.$tc("sw-product.crossselling.priceDescendingSortingType"),value:"price:DESC"},{label:this.$tc("sw-product.crossselling.priceAscendingSortingType"),value:"price:ASC"},{label:this.$tc("sw-product.crossselling.nameSortingType"),value:"name:ASC"},{label:this.$tc("sw-product.crossselling.releaseDateDescendingSortingType"),value:"releaseDate:DESC"},{label:this.$tc("sw-product.crossselling.releaseDateAscendingSortingType"),value:"releaseDate:ASC"}]},groupedTypes:function(){return[{label:this.$tc("sw-product.crossselling.productListType"),value:"productList"}]},previewDisabled:function(){return!this.productStream},sortingConCat:function(){return"".concat(this.grouped.sortBy,":").concat(this.grouped.sortDirection)},disablePositioning:function(){return!!this.term||"position"!==this.sortBy},associationValue:function(){return K.get(this.grouped,"productStreamId")||""}}),watch:{"grouped.productStreamId":function(){this.streamPreviewAvailable()&&this.loadStreamPreview()}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.grouped.type="productList",this.useManualAssignment="productList"===this.grouped.type,this.streamPreviewAvailable()&&this.loadStreamPreview()},streamPreviewAvailable:function(){return!this.useManualAssignment&&this.grouped.productStreamId},onShowDeleteModal:function(){this.showDeleteModal=!0},onCloseDeleteModal:function(){this.showDeleteModal=!1},onConfirmDelete:function(){var e=this;this.onCloseDeleteModal(),this.$nextTick((function(){e.product.extensions.groups.remove(e.grouped.id)}))},openModalPreview:function(){this.previewDisabled||(this.showModalPreview=!0)},closeModalPreview:function(){this.showModalPreview=!1},loadStreamPreview:function(){var e=this;this.productStreamRepository.get(this.grouped.productStreamId,Z.api).then((function(t){e.productStream=t,e.getProductStreamFilter()}))},getProductStreamFilter:function(){var e=this;return this.productStreamFilterRepository.search(this.productStreamFilterCriteria,Z.api).then((function(t){e.productStreamFilter=t}))},updateProductStreamFilterTree:function(e){var t=e.conditions;this.productStreamFilterTree=t},onSortingChanged:function(e){var t=I(e.split(":"),2);this.grouped.sortBy=t[0],this.grouped.sortDirection=t[1]},onTypeChanged:function(e){this.useManualAssignment="productList"===e}}});n("6pSz");function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==W(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===W(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=Shopware.Component.getComponentHelper().mapGetters,re=Shopware,oe=re.Component,ie=re.Context,se=Shopware.Data.Criteria;oe.register("tradelinepro-product-grouped-assignment",{template:'{% block tradelinepro_product_grouped_assignment %}\n<div class="sw-product-grouped-assignment">\n\n    {% block tradelinepro_product_grouped_assignment_select %}\n        <sw-entity-single-select\n            :label="$tc(\'sw-product.crossselling.inputCrossSellingProductList\')"\n            entity="product"\n            value=""\n            :criteria="searchCriteria"\n            :context="searchContext"\n            disable-auto-close\n            :disabled="!allowEdit"\n            show-clearable-button\n            {% if VUE3 %}\n            @update:value="onToggleProduct"\n            {% else %}\n            @change="onToggleProduct"\n            {% endif %}\n        >\n\n            <template #result-item="{ item, index }">\n                <slot\n                        name="result-item"\n                        v-bind="{ item, index, isSelected }"\n                >\n                    <sw-select-result\n                            :selected="isSelected(item)"\n                            v-bind="{ item, index }"\n                    >\n                        \n                        {% block sw_entity_single_select_base_results_list_result_label %}\n                            <span class="sw-select-result__result-item-text">\n                            <sw-product-variant-info :variations="item.variation">\n                                {{ item.translated.name || item.name }}\n                            </sw-product-variant-info>\n                        </span>\n                        {% endblock %}\n                    </sw-select-result>\n                </slot>\n            </template>\n\n        </sw-entity-single-select>\n    {% endblock %}\n\n    {% block tradelinepro_product_grouped_assignment_option_grid %}\n    <sw-data-grid\n        v-if="total"\n        :data-source="assignedProducts"\n        :key="isLoadingGrid"\n        :is-loading="isLoadingGrid"\n        :columns="assignedProductColumns"\n        :show-settings="true"\n        :show-selection="false"\n    >\n\n        <template #actions="{ item }">\n            <sw-context-menu-item\n                :disabled="!allowEdit"\n                variant="danger"\n                @click="removeItem(item)"\n            >\n\n                {{ $tc(\'global.default.delete\') }}\n            </sw-context-menu-item>\n        </template>\n\n        <template #column-product.translated.name="{ item }">\n            \n            {% block sw_data_grid_columns_render_value %}\n                <span>\n                    <sw-product-variant-info :variations="item.product.variation">\n                        {{ item.product.translated.name || item.product.name || variantNames[item.product.id] }}\n                    </sw-product-variant-info>\n                </span>\n            {% endblock %}\n        </template>\n\n        <template #column-position="{ item }">\n            <sw-data-grid-column-position\n                ref="columnPosition"\n                v-model="assignedProducts"\n                :show-value="true"\n                :item="item"\n            />\n        </template>\n    </sw-data-grid>\n    {% endblock %}\n\n    {% block tradelinepro_product_grouped_assignment_empty_state %}\n        <sw-empty-state\n            v-if="!total && !isLoadingGrid"\n            title=""\n            :absolute="false"\n            :subline="emptyStateSubline"\n        >\n\n        <template #icon>\n            <img\n                    :src="assetFilter(\'/administration/static/img/empty-states/products-empty-state.svg\')"\n                    alt=""\n            >\n        </template>\n    </sw-empty-state>\n    {% endblock %}\n\n</div>\n{% endblock %}\n',inject:["repositoryFactory"],props:{assignedProducts:{type:Array,required:!0},groupedId:{type:String,required:!0},allowEdit:{type:Boolean,required:!1,default:!0}},data:function(){return{productId:null,isLoadingData:!1,variantNames:{}}},created:function(){this.createdComponent()},computed:ee(ee({},ne("swProductDetail",["isLoading"])),{},{context:function(){return ee(ee({},Shopware.Context.api),{},{inheritance:!0})},isLoadingGrid:function(){return this.isLoadingData||this.isLoading},assignmentRepository:function(){return this.repositoryFactory.create(this.assignedProducts.entity,this.assignedProducts.source)},productRepository:function(){return this.repositoryFactory.create("product")},searchCriteria:function(){var e=new se;return this.productId&&e.addFilter(se.not("and",[se.equals("id",this.productId)])),e.addAssociation("options.group"),e},searchContext:function(){return ee(ee({},ie.api),{},{inheritance:!0})},total:function(){return this.assignedProducts&&Array.isArray(this.assignedProducts)?this.assignedProducts.length:0},assignedProductColumns:function(){return[{property:"product.translated.name",label:this.$tc("sw-product.list.columnName"),primary:!0,allowResize:!0,sortable:!1},{property:"product.productNumber",label:this.$tc("sw-product.list.columnProductNumber"),allowResize:!0,sortable:!1},{property:"position",label:this.$tc("sw-product.crossselling.inputCrossSellingPosition"),allowResize:!0,sortable:!1}]},emptyStateSubline:function(){return this.$tc("grouped-products.assignEmptyStateDescription")},variantProductIds:function(){var e=[];return this.assignedProducts.forEach((function(t){!t.product.parentId||t.product.translated.name||t.product.name||e.push(t.product.id)})),e},variantCriteria:function(){var e=new se(1,25);return e.setIds(this.variantProductIds),e},assetFilter:function(){return Shopware.Filter.getByName("asset")}}),methods:{createdComponent:function(){var e=this;this.$route.params.id&&(this.productId=this.$route.params.id),this.variantProductIds.length>0&&this.productRepository.search(this.variantCriteria,ee(ee({},ie.api),{},{inheritance:!0})).then((function(t){var n={};t.forEach((function(e){n[e.id]=e.translated.name})),e.variantNames=n}))},onToggleProduct:function(e){var t=this;if(null!==e){this.isLoadingData=!0;var n=this.assignedProducts.find((function(t){return t.productId===e}));if(n)this.removeItem(n),this.isLoadingData=!1;else{var r=this.assignmentRepository.create();r.groupedId=this.groupedId,r.productId=e,r.position=this.assignedProducts.length+1,this.assignedProducts.add(r);var o=new se(1,25);o.addAssociation("options.group"),this.productRepository.get(e,ee(ee({},ie.api),{},{inheritance:!0}),o).then((function(e){r.product=e,t.isLoadingData=!1}))}}},removeItem:function(e){var t=e.position;this.assignedProducts.remove(e.id),this.assignedProducts.forEach((function(e){e.position>t&&--e.position}))},isSelected:function(e){return this.assignedProducts.some((function(t){return t.productId===e.id}))}}})},h21c:function(e,t,n){var r=n("2gbo");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("P8hj").default)("0fa07a15",r,!0,{})},nHlZ:function(e,t,n){var r=n("XFAb");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("P8hj").default)("6c3922a9",r,!0,{})},pFeY:function(e,t,n){var r=n("RK4I");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("P8hj").default)("323d0805",r,!0,{})}});
//# sourceMappingURL=tradelinepro-grouped-products.js.map